<div class="container">

  <div class="card mat-elevation-z8 mx-auto d-block">
    <div class="card-header ">
      Choose Menu
    </div>

    <div class="card-body">
      <app-error></app-error>
      <form class="mat-dialog-content" #addCustomerForm="ngForm">

        <div *ngIf="!menu.showLunchVariations" [hidden]="errorService.error">
          <div class="card my-3">
            <div class="card-body">
              <table class="table" summary="The courses you can select for lunch">
                <caption>Lunch</caption>
                <thead>
                <tr>
                  <th scope="col">Dish</th>
                  <th scope="col">Whole Portion</th>
                  <th scope="col">Half Portion</th>
                </tr>
                </thead>

                <mat-error *ngIf="checkReservation(l, hl)">{{getErrorMessage()}}</mat-error>

                <tr *ngFor="let dish of menu.menu.lunch_dishes">
                  <td scope="row">{{dish}}</td>
                  <td>

                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(l,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(l, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, l)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>

                  <td>
                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(hl,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(hl, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>
                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hl)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <div class="card my-3" *ngIf="menu.showLunchVariations" [hidden]="errorService.error">
          <div class="card-body">
            <table class="table" summary="The courses you can select for lunch">
              <caption>Lunch</caption>
              <thead>
              <tr>
                <th scope="col">Dish</th>
                <th scope="col">Whole Portion</th>
                <th scope="col">Half Portion</th>
              </tr>
              </thead>

              <mat-error *ngIf="checkReservation(l, hl)">{{getErrorMessage()}}</mat-error>

              <tr *ngFor="let dish of menu.menu.lunch_dishes">
                <td scope="row">{{dish}}</td>
                <td>

                  <mdb-form-field color="accent">
                    <mat-select placeholder={{getRes(l,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(l, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mdb-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, l)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>

                <td>
                  <mdb-form-field color="accent">
                    <mat-select placeholder={{getRes(hl,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(hl, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mdb-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hl)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>
              </tr>
            </table>

            <app-menu-variations></app-menu-variations>
          </div>
        </div>

        <div *ngIf="!menu.showDinnerVariations" [hidden]="errorService.error">

          <div class="card my-3">

            <div class="card-body">
              <table class="table" summary="The courses you can select for dinner">
                <caption>Dinner</caption>
                <tr>
                  <th scope="col">Dish</th>
                  <th scope="col">Whole Portion</th>
                  <th scope="col">Half Portion</th>
                </tr>

                <mat-error *ngIf="checkReservation(d, hd)">{{getErrorMessage()}}</mat-error>

                <tr *ngFor="let dish of menu.menu.dinner_dishes">
                  <td scope="row">{{dish}}</td>
                  <td>
                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(d,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(d, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4"
                              (click)="addVariations(dish, hd)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>
                  <td>

                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(hd,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(hd, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4"
                              (click)="addVariations(dish, hd)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <div class="card my-3" *ngIf="menu.showDinnerVariations" [hidden]="errorService.error">
          <div class="card-body">
            <table class="table" summary="The courses you can select for dinner">
              <caption>Dinner</caption>
              <tr>
                <th scope="col">Dish</th>
                <th scope="col">Whole Portion</th>
                <th scope="col">Half Portion</th>
              </tr>

              <mat-error *ngIf="checkReservation(d, hd)">{{getErrorMessage()}}</mat-error>

              <tr *ngFor="let dish of menu.menu.dinner_dishes">
                <td scope="row">{{dish}}</td>
                <td>
                  <mat-form-field color="accent">
                    <mat-select placeholder={{getRes(d,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(d, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, d)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>

                </td>
                <td>
                  <mat-form-field color="accent">
                    <mat-select placeholder={{getRes(hd,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(hd, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hd)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>

              </tr>

            </table>

            <app-menu-variations></app-menu-variations>
          </div>
        </div>

        <div class="card" [hidden]="errorService.error">
          <div class="card-body">

            <div>
              Other notes:
              <mat-list>
                <mat-list-item *ngFor="let singleNote of getNote()">
                  {{singleNote}}
                </mat-list-item>
              </mat-list>
            </div>


            <mat-list>
              <mat-list-item>
                {{getNote()}}
              </mat-list-item>
            </mat-list>

            <div class="md-form d-flex bd-highlight ">
              <mdb-form-field color="accent" class="p-2 flex-grow-1 bd-highlight">
                <label for="notes">Other notes</label>
                <input class="form-control" #inputNote type="text" id='notes' name="notes"
                       [(ngModel)]="note" placeholder='Insert your note'
                (keyup.enter)="addNote()" />
              </mdb-form-field>

              <button mat-button type="button" (click)="addNote()" aria-label="Add"><span
                class="material-icons p-2 bd-highlight">add</span></button>
            </div>

          </div>

        </div>

        <div class="btn-group btn-group-sm d-flex flex-row-reverse">
          <button type="button" class="btn px-5 py-3 ml-4 mt-4" (click)="checkSave()" aria-label="Save"
                  [disabled]="!addCustomerForm.form.valid">Save
          </button>
        </div>
      </form>

    </div>
  </div>
</div>
