<div class="container">

  <div class="card mat-elevation-z8 mx-auto d-block">
    <div class="card-header ">
      Choose Menu
    </div>

    <div class="card-body">
      <app-error></app-error>
      <form class="mat-dialog-content" #addCustomerForm="ngForm">

        <div class="btn-group btn-group-sm d-flex justify-content-center">
          <button type="button" class="btn px-5 py-3 mb-2" aria-label="Choose Dinenr" (click)="changeLunchCardState()" *ngIf="lunchCardState">
            Close Lunch
          </button>

          <button type="button" class="btn px-5 py-3 mb-2" aria-label="Choose Dinenr" (click)="!changeLunchCardState()" *ngIf="!lunchCardState">
            Click to choose Lunch
          </button>
        </div>

        <div *ngIf="!menu.showLunchVariations && lunchCardState" [hidden]="errorService.error">
          <div class="card my-3">
            <div class="card-body">
              <table class="table" summary="The courses you can select for lunch">
                <caption>Lunch</caption>
                <thead>
                <tr>
                  <th scope="col">Dish</th>
                  <th scope="col">Whole Portion</th>
                  <th scope="col">Half Portion</th>
                </tr>
                </thead>

                <mat-error *ngIf="checkReservation(l, hl)">{{getErrorMessage()}}</mat-error>


                <tr *ngFor="let dish of menu.menu.lunch_dishes">
                  <td scope="row">{{dish}}</td>
                  <td>

                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(l,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(l, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, l)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>

                  <td>
                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(hl,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(hl, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>
                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hl)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <div class="card my-3" *ngIf="menu.showLunchVariations" [hidden]="errorService.error">
          <div class="card-body">
            <table class="table" summary="The courses you can select for lunch">
              <caption>Lunch</caption>
              <thead>
              <tr>
                <th scope="col">Dish</th>
                <th scope="col">Whole Portion</th>
                <th scope="col">Half Portion</th>
              </tr>
              </thead>

              <mat-error *ngIf="checkReservation(l, hl)">{{getErrorMessage()}}</mat-error>

              <tr *ngFor="let dish of menu.menu.lunch_dishes">
                <td scope="row">{{dish}}</td>
                <td>

                  <mdb-form-field color="accent">
                    <mat-select placeholder={{getRes(l,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(l, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mdb-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, l)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>

                <td>
                  <mdb-form-field color="accent">
                    <mat-select placeholder={{getRes(hl,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(hl, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mdb-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hl)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>
              </tr>
            </table>

            <app-menu-variations></app-menu-variations>
          </div>
        </div>

        <div class="btn-group btn-group-sm d-flex justify-content-center">
          <button type="button" class="btn px-5 py-3 mb-2 mt-2" aria-label="Choose Dinenr" (click)="!changeDinnerCardState()" *ngIf="!dinnerCardState" onclick="changeDinnerCardState()">
            Click to choose Dinner
          </button>

          <button type="button" class="btn px-5 py-3 mb-2 mt-2" aria-label="Choose Dinenr" (click)="changeDinnerCardState()" *ngIf="dinnerCardState" onclick="changeDinnerCardState()">
            Close Dinner
          </button>

        </div>

        <div *ngIf="!menu.showDinnerVariations && dinnerCardState" [hidden]="errorService.error">

          <div class="card my-3">

            <div class="card-body">
              <table class="table" summary="The courses you can select for dinner">
                <caption>Dinner</caption>
                <tr>
                  <th scope="col">Dish</th>
                  <th scope="col">Whole Portion</th>
                  <th scope="col">Half Portion</th>
                </tr>

                <mat-error *ngIf="checkReservation(d, hd)">{{getErrorMessage()}}</mat-error>

                <tr *ngFor="let dish of menu.menu.dinner_dishes">
                  <td scope="row">{{dish}}</td>
                  <td>
                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(d,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(d, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4"
                              (click)="addVariations(dish, hd)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>
                  <td>

                    <mdb-form-field color="accent">
                      <mat-select placeholder={{getRes(hd,dish)}}>
                        <mat-option *ngFor="let n of people" value=n (click)="setReservation(hd, dish, n)">
                          {{n}}
                        </mat-option>
                      </mat-select>
                    </mdb-form-field>

                    <div class="btn-group btn-group-sm d-flex">
                      <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4"
                              (click)="addVariations(dish, hd)"
                              aria-label="Add Variation">Add Variation
                      </button>
                    </div>

                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <div class="card my-3" *ngIf="menu.showDinnerVariations" [hidden]="errorService.error">
          <div class="card-body">
            <table class="table" summary="The courses you can select for dinner">
              <caption>Dinner</caption>
              <tr>
                <th scope="col">Dish</th>
                <th scope="col">Whole Portion</th>
                <th scope="col">Half Portion</th>
              </tr>

              <mat-error *ngIf="checkReservation(d, hd)">{{getErrorMessage()}}</mat-error>

              <tr *ngFor="let dish of menu.menu.dinner_dishes">
                <td scope="row">{{dish}}</td>
                <td>
                  <mat-form-field color="accent">
                    <mat-select placeholder={{getRes(d,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(d, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, d)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>

                </td>
                <td>
                  <mat-form-field color="accent">
                    <mat-select placeholder={{getRes(hd,dish)}}>
                      <mat-option *ngFor="let n of people" value=n (click)="setReservation(hd, dish, n)">
                        {{n}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div class="btn-group btn-group-sm d-flex">
                    <button type="button" class="fa fa-plus btn px-3 px-1 ml-4 mt-4" (click)="addVariations(dish, hd)"
                            aria-label="Add Variation">Add Variation
                    </button>
                  </div>
                </td>

              </tr>

            </table>

            <app-menu-variations></app-menu-variations>
          </div>
        </div>

        <div class="card" [hidden]="errorService.error">
          <div class="card-body">

            <div>
              Other notes:
              <mat-list>
                <mat-list-item *ngFor="let singleNote of getNote()">
                  {{singleNote}}
                </mat-list-item>
              </mat-list>
            </div>


            <div class="md-form d-flex">
              <mdb-form-field color="accent" class="p-2 flex-grow-1 bd-highlight"  (keyup.enter)="setNotes($event)">
                <label for="notes">Other notes</label>

                <input #input type="text" id='notes' name="notes" class="form-control"
                       placeholder={{getNote()}} />
              </mdb-form-field>
              <button mat-button type="button" class="p-2 bd-highlight" (click)="setNotes($event)">
                <span class="material-icons">add</span>
              </button>
            </div>

<!--
            <div id="notes">
              <p>Other notes</p>
              <label for="otherNotes">Other notes</label>
              <textarea (keypress)="setNotes($event)" id="otherNotes" placeholder={{getNote()}}></textarea>
            </div>
-->
          </div>

        </div>

        <div class="btn-group btn-group-sm d-flex flex-row-reverse">
          <button type="button" class="btn px-5 py-3 ml-4 mt-4" (click)="checkSave()" aria-label="Save"
                  [disabled]="!addCustomerForm.form.valid">Save
          </button>
        </div>
      </form>

    </div>
  </div>
</div>
